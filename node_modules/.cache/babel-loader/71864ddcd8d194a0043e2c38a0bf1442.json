{"ast":null,"code":"var _jsxFileName = \"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\src\\\\components\\\\FinderImage\\\\FinderImage.js\";\nimport React, { Component } from 'react';\nimport getAxios from '../../services/fetch';\nimport Searchbar from '../Searchbar/Searchbar';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport Button from '../Button/Button';\nimport LoaderSection from '../Loader/Loader';\n\nclass FinderImage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      gallery: [],\n      query: \"\",\n      page: 1,\n      isLoading: false\n    };\n\n    this.ChangeQuery = query => {\n      this.setState({\n        query,\n        page: 1,\n        gallery: []\n      });\n    };\n\n    this.fetchRequest = async () => {\n      try {\n        const {\n          query,\n          page\n        } = this.state;\n        const response = await getAxios(query, page);\n        return response.data.hits;\n      } catch (error) {\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.pageChange = () => {\n      this.setState(state => ({\n        page: state.page + 1\n      }));\n    };\n  }\n\n  componentDidUpdate(prevState) {\n    const {\n      query,\n      page\n    } = this.state;\n\n    if (query !== prevState.query) {\n      this.setState({\n        isLoading: true\n      });\n\n      const request = async () => {\n        const result = await this.fetchRequest();\n        this.setState({\n          gallery: [...result],\n          isLoading: false\n        });\n      };\n\n      request();\n    }\n\n    if (page !== prevState.page) {\n      this.setState({\n        isLoading: true\n      });\n\n      const request = async () => {\n        const result = await this.fetchRequest();\n        this.setState(state => ({\n          gallery: [...state.gallery, ...result],\n          isLoading: false\n        }));\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\"\n        });\n      };\n\n      request();\n    }\n  }\n\n  render() {\n    const {\n      gallery,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Searchbar, {\n      ChangeQuery: this.ChangeQuery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ImageGallery, {\n      gallery: gallery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }), !isLoading && /*#__PURE__*/React.createElement(Button, {\n      pageChange: this.pageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 32\n      }\n    })), isLoading && /*#__PURE__*/React.createElement(LoaderSection, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 27\n      }\n    }));\n  }\n\n}\n\nexport default FinderImage;","map":{"version":3,"sources":["D:/GO/goit-react-hw-03-image-finder/src/components/FinderImage/FinderImage.js"],"names":["React","Component","getAxios","Searchbar","ImageGallery","Button","LoaderSection","FinderImage","state","gallery","query","page","isLoading","ChangeQuery","setState","fetchRequest","response","data","hits","error","pageChange","componentDidUpdate","prevState","request","result","window","scrollTo","top","document","documentElement","scrollHeight","behavior","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport getAxios from '../../services/fetch'\r\nimport Searchbar from '../Searchbar/Searchbar'\r\nimport ImageGallery from '../ImageGallery/ImageGallery'\r\nimport Button from '../Button/Button'\r\nimport LoaderSection from '../Loader/Loader'\r\n\r\n\r\nclass FinderImage extends Component{\r\n    state = {\r\n        gallery: [],\r\n        query: \"\",\r\n        page: 1,\r\n        isLoading: false,\r\n      };\r\n    \r\n      ChangeQuery = (query) => {\r\n        this.setState({\r\n          query,\r\n          page: 1,\r\n          gallery: [],\r\n        });\r\n      };\r\n    \r\n      fetchRequest = async () => {\r\n        try {\r\n          const { query, page } = this.state;\r\n          const response = await getAxios(query, page);\r\n          return response.data.hits;\r\n        } catch (error) {\r\n          this.setState({\r\n            error: true,\r\n          });\r\n        }\r\n      };\r\n    \r\n      componentDidUpdate(prevState) {\r\n        const { query, page } = this.state;\r\n    \r\n        if (query !== prevState.query) {\r\n          this.setState({\r\n            isLoading: true,\r\n          });\r\n          const request = async () => {\r\n            const result = await this.fetchRequest();\r\n            this.setState({\r\n              gallery: [...result],\r\n              isLoading: false,\r\n            });\r\n          };\r\n          request();\r\n        }\r\n    \r\n        if (page !== prevState.page) {\r\n          this.setState({\r\n            isLoading: true,\r\n          });\r\n          const request = async () => {\r\n            const result = await this.fetchRequest();\r\n            this.setState((state) => ({\r\n              gallery: [...state.gallery, ...result],\r\n              isLoading: false,\r\n            }));\r\n    \r\n            window.scrollTo({\r\n              top: document.documentElement.scrollHeight,\r\n              behavior: \"smooth\",\r\n            });\r\n          };\r\n          request();\r\n        }\r\n      }\r\n    \r\n      pageChange = () => {\r\n        this.setState((state) => ({\r\n          page: state.page + 1,\r\n        }));\r\n      };\r\n    \r\n      render() {\r\n        const { gallery, isLoading} = this.state;\r\n        return (\r\n          <>\r\n            <Searchbar ChangeQuery={this.ChangeQuery} />\r\n           \r\n            \r\n              <>\r\n                <ImageGallery gallery={gallery} />\r\n                {!isLoading && <Button pageChange={this.pageChange} />}\r\n              </>\r\n            \r\n            {isLoading && <LoaderSection />}\r\n          </>\r\n        );\r\n      }\r\n    }\r\nexport default FinderImage;"]},"metadata":{},"sourceType":"module"}