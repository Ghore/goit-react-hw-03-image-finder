{"ast":null,"code":"var _jsxFileName = \"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\src\\\\components\\\\FinderImage\\\\FinderImage.js\";\nimport React, { Component } from 'react';\nimport getAxios from '../../services/fetch';\nimport { Searchbar } from '../Searchbar/Searchbar';\n\nclass FinderImage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      gallery: [],\n      query: \"\",\n      page: 1,\n      isLoading: false,\n      error: false\n    };\n\n    this.fetchRequest = async () => {\n      try {\n        const {\n          query,\n          page\n        } = this.state;\n        const response = await getAxios(query, page);\n        return response.data.hits;\n      } catch (error) {\n        this.setState({\n          error: true\n        });\n      }\n    };\n\n    this.pageChanger = () => {\n      this.setState(state => ({\n        page: state.page + 1\n      }));\n    };\n  }\n\n  handleOnChange(query) {\n    this.setState({\n      query,\n      page: 1,\n      gallery: []\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      query,\n      page\n    } = this.state;\n\n    if (query !== prevState.query) {\n      this.setState({\n        isLoading: true\n      });\n\n      const request = async () => {\n        const result = await this.fetchRequest();\n        this.setState({\n          gallery: [...result],\n          isLoading: false\n        });\n      };\n\n      request();\n    }\n\n    if (page !== prevState.page) {\n      this.setState({\n        isLoading: true\n      });\n\n      const request = async () => {\n        const result = await this.fetchRequest();\n        this.setState(state => ({\n          gallery: [...state.gallery, ...result],\n          isLoading: false\n        }));\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: \"smooth\"\n        });\n      };\n\n      request();\n    }\n  }\n\n  render() {\n    const {\n      gallery,\n      isLoading,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Searchbar, {\n      onChangeQuery: this.onChangeQuery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }), error && /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 19\n      }\n    }, \"something gone wrong, try again later\"), !!gallery.length && !error && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ImageGallery, {\n      gallery: gallery,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }), !isLoading && /*#__PURE__*/React.createElement(Button, {\n      pageChanger: this.pageChanger,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 28\n      }\n    })), isLoading && /*#__PURE__*/React.createElement(LoaderSection, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 23\n      }\n    }));\n  }\n\n}\n\nexport default FinderImage;","map":{"version":3,"sources":["D:/GO/goit-react-hw-03-image-finder/src/components/FinderImage/FinderImage.js"],"names":["React","Component","getAxios","Searchbar","FinderImage","state","gallery","query","page","isLoading","error","fetchRequest","response","data","hits","setState","pageChanger","handleOnChange","componentDidUpdate","prevProps","prevState","request","result","window","scrollTo","top","document","documentElement","scrollHeight","behavior","render","onChangeQuery","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAAQC,SAAR,QAAwB,wBAAxB;;AAGA,MAAMC,WAAN,SAA0BH,SAA1B,CAAmC;AAAA;AAAA;AAAA,SACnCI,KADmC,GAC3B;AACJC,MAAAA,OAAO,EAAC,EADJ;AAEJC,MAAAA,KAAK,EAAC,EAFF;AAGJC,MAAAA,IAAI,EAAC,CAHD;AAIJC,MAAAA,SAAS,EAAE,KAJP;AAKJC,MAAAA,KAAK,EAAC;AALF,KAD2B;;AAAA,SAiBnCC,YAjBmC,GAiBpB,YAAW;AACtB,UAAG;AACC,cAAM;AAACJ,UAAAA,KAAD;AAAQC,UAAAA;AAAR,YAAgB,KAAKH,KAA3B;AACA,cAAMO,QAAQ,GAAG,MAAMV,QAAQ,CAACK,KAAD,EAAQC,IAAR,CAA/B;AACA,eAAOI,QAAQ,CAACC,IAAT,CAAcC,IAArB;AACH,OAJD,CAIC,OAAMJ,KAAN,EAAY;AACT,aAAKK,QAAL,CAAc;AAACL,UAAAA,KAAK,EAAC;AAAP,SAAd;AACH;AACJ,KAzBkC;;AAAA,SAgEjCM,WAhEiC,GAgEnB,MAAM;AAClB,WAAKD,QAAL,CAAeV,KAAD,KAAY;AACxBG,QAAAA,IAAI,EAAEH,KAAK,CAACG,IAAN,GAAa;AADK,OAAZ,CAAd;AAGD,KApEgC;AAAA;;AASnCS,EAAAA,cAAc,CAACV,KAAD,EAAO;AACrB,SAAKQ,QAAL,CAAc;AACVR,MAAAA,KADU;AAEVC,MAAAA,IAAI,EAAE,CAFI;AAGVF,MAAAA,OAAO,EAAC;AAHE,KAAd;AAKC;;AAYDY,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACrC,UAAM;AAAEb,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAkB,KAAKH,KAA7B;;AAEA,QAAIE,KAAK,KAAKa,SAAS,CAACb,KAAxB,EAA+B;AAC7B,WAAKQ,QAAL,CAAc;AACZN,QAAAA,SAAS,EAAE;AADC,OAAd;;AAGA,YAAMY,OAAO,GAAG,YAAY;AAC1B,cAAMC,MAAM,GAAG,MAAM,KAAKX,YAAL,EAArB;AACA,aAAKI,QAAL,CAAc;AACZT,UAAAA,OAAO,EAAE,CAAC,GAAGgB,MAAJ,CADG;AAEZb,UAAAA,SAAS,EAAE;AAFC,SAAd;AAID,OAND;;AAOAY,MAAAA,OAAO;AACR;;AAED,QAAIb,IAAI,KAAKY,SAAS,CAACZ,IAAvB,EAA6B;AAC3B,WAAKO,QAAL,CAAc;AACZN,QAAAA,SAAS,EAAE;AADC,OAAd;;AAGA,YAAMY,OAAO,GAAG,YAAY;AAC1B,cAAMC,MAAM,GAAG,MAAM,KAAKX,YAAL,EAArB;AACA,aAAKI,QAAL,CAAeV,KAAD,KAAY;AACxBC,UAAAA,OAAO,EAAE,CAAC,GAAGD,KAAK,CAACC,OAAV,EAAmB,GAAGgB,MAAtB,CADe;AAExBb,UAAAA,SAAS,EAAE;AAFa,SAAZ,CAAd;AAKAc,QAAAA,MAAM,CAACC,QAAP,CAAgB;AACdC,UAAAA,GAAG,EAAEC,QAAQ,CAACC,eAAT,CAAyBC,YADhB;AAEdC,UAAAA,QAAQ,EAAE;AAFI,SAAhB;AAID,OAXD;;AAYAR,MAAAA,OAAO;AACR;AACF;;AAQDS,EAAAA,MAAM,GAAG;AACP,UAAM;AAAExB,MAAAA,OAAF;AAAWG,MAAAA,SAAX;AAAsBC,MAAAA;AAAtB,QAAgC,KAAKL,KAA3C;AACA,wBACE,uDACE,oBAAC,SAAD;AAAW,MAAA,aAAa,EAAE,KAAK0B,aAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEGrB,KAAK,iBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAFZ,EAGG,CAAC,CAACJ,OAAO,CAAC0B,MAAV,IAAoB,CAACtB,KAArB,iBACC,uDACE,oBAAC,YAAD;AAAc,MAAA,OAAO,EAAEJ,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEG,CAACG,SAAD,iBAAc,oBAAC,MAAD;AAAQ,MAAA,WAAW,EAAE,KAAKO,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFjB,CAJJ,EASGP,SAAS,iBAAI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAThB,CADF;AAaD;;AArFgC;;AAwFnC,eAAeL,WAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport getAxios from '../../services/fetch'\r\nimport {Searchbar} from '../Searchbar/Searchbar'\r\n\r\n\r\nclass FinderImage extends Component{\r\nstate = {\r\n    gallery:[],\r\n    query:\"\",\r\n    page:1,\r\n    isLoading: false,\r\n    error:false,\r\n}\r\n\r\nhandleOnChange(query){\r\nthis.setState({\r\n    query, \r\n    page: 1,\r\n    gallery:[]\r\n})\r\n}\r\n\r\nfetchRequest = async() => {\r\n    try{\r\n        const {query, page} = this.state;\r\n        const response = await getAxios(query, page);\r\n        return response.data.hits\r\n    }catch(error){\r\n        this.setState({error:true})\r\n    }\r\n}\r\n\r\ncomponentDidUpdate(prevProps, prevState) {\r\n    const { query, page } = this.state;\r\n\r\n    if (query !== prevState.query) {\r\n      this.setState({\r\n        isLoading: true,\r\n      });\r\n      const request = async () => {\r\n        const result = await this.fetchRequest();\r\n        this.setState({\r\n          gallery: [...result],\r\n          isLoading: false,\r\n        });\r\n      };\r\n      request();\r\n    }\r\n\r\n    if (page !== prevState.page) {\r\n      this.setState({\r\n        isLoading: true,\r\n      });\r\n      const request = async () => {\r\n        const result = await this.fetchRequest();\r\n        this.setState((state) => ({\r\n          gallery: [...state.gallery, ...result],\r\n          isLoading: false,\r\n        }));\r\n\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      };\r\n      request();\r\n    }\r\n  }\r\n\r\n  pageChanger = () => {\r\n    this.setState((state) => ({\r\n      page: state.page + 1,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { gallery, isLoading, error } = this.state;\r\n    return (\r\n      <>\r\n        <Searchbar onChangeQuery={this.onChangeQuery} />\r\n        {error && <h1>something gone wrong, try again later</h1>}\r\n        {!!gallery.length && !error && (\r\n          <>\r\n            <ImageGallery gallery={gallery} />\r\n            {!isLoading && <Button pageChanger={this.pageChanger} />}\r\n          </>\r\n        )}\r\n        {isLoading && <LoaderSection />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FinderImage;"]},"metadata":{},"sourceType":"module"}