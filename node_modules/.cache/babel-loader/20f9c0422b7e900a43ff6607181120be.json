{"ast":null,"code":"import _toConsumableArray from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\GO\\\\goit-react-hw-03-image-finder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import getAxios from\"../../services/fetch\";import Searchbar from\"../Searchbar/Searchbar\";import ImageGallery from\"../ImageGallery/ImageGallery\";import Button from\"../Button/Button\";import LoaderSection from\"../Loader/Loader\";var FinderImage=/*#__PURE__*/function(_Component){_inherits(FinderImage,_Component);var _super=_createSuper(FinderImage);function FinderImage(){var _this;_classCallCheck(this,FinderImage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={gallery:[],query:\"\",page:1,isLoading:false,error:false};_this.ChangeQuery=function(query){_this.setState({query:query,page:1,gallery:[]});};_this.fetchRequest=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,query,page,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_this$state=_this.state,query=_this$state.query,page=_this$state.page;_context.next=4;return getAxios(query,page);case 4:response=_context.sent;return _context.abrupt(\"return\",response.data.hits);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);_this.setState({error:true});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));_this.pageChange=function(){_this.setState(function(state){return{page:state.page+1};});};return _this;}_createClass(FinderImage,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this2=this;var _this$state2=this.state,query=_this$state2.query,page=_this$state2.page;if(query!==prevState.query){this.setState({isLoading:true});var request=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this2.fetchRequest();case 2:result=_context2.sent;_this2.setState({gallery:_toConsumableArray(result),isLoading:false});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function request(){return _ref2.apply(this,arguments);};}();request();}if(page!==prevState.page){this.setState({isLoading:true});var _request=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this2.fetchRequest();case 2:result=_context3.sent;_this2.setState(function(state){return{gallery:[].concat(_toConsumableArray(state.gallery),_toConsumableArray(result)),isLoading:false};});window.scrollTo({top:document.documentElement.scrollHeight,behavior:\"smooth\"});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function _request(){return _ref3.apply(this,arguments);};}();_request();}}},{key:\"render\",value:function render(){var _this$state3=this.state,gallery=_this$state3.gallery,isLoading=_this$state3.isLoading,error=_this$state3.error;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Searchbar,{ChangeQuery:this.ChangeQuery}),!!gallery.length&&!error&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ImageGallery,{gallery:gallery}),!isLoading&&/*#__PURE__*/React.createElement(Button,{pageChange:this.pageChange})),isLoading&&/*#__PURE__*/React.createElement(LoaderSection,null));}}]);return FinderImage;}(Component);export default FinderImage;","map":{"version":3,"sources":["D:/GO/goit-react-hw-03-image-finder/src/components/FinderImage/FinderImage.js"],"names":["React","Component","getAxios","Searchbar","ImageGallery","Button","LoaderSection","FinderImage","state","gallery","query","page","isLoading","error","ChangeQuery","setState","fetchRequest","response","data","hits","pageChange","prevProps","prevState","request","result","window","scrollTo","top","document","documentElement","scrollHeight","behavior","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport getAxios from \"../../services/fetch\";\r\nimport Searchbar from \"../Searchbar/Searchbar\";\r\nimport ImageGallery from \"../ImageGallery/ImageGallery\";\r\nimport Button from \"../Button/Button\";\r\nimport LoaderSection from \"../Loader/Loader\";\r\n\r\nclass FinderImage extends Component {\r\n  state = {\r\n    gallery: [],\r\n    query: \"\",\r\n    page: 1,\r\n    isLoading: false,\r\n    error: false,\r\n  };\r\n\r\n  ChangeQuery = (query) => {\r\n    this.setState({\r\n      query,\r\n      page: 1,\r\n      gallery: [],\r\n    });\r\n  };\r\n\r\n  fetchRequest = async () => {\r\n    try {\r\n      const { query, page } = this.state;\r\n      const response = await getAxios(query, page);\r\n      return response.data.hits;\r\n    } catch (error) {\r\n      this.setState({\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { query, page } = this.state;\r\n\r\n    if (query !== prevState.query) {\r\n      this.setState({\r\n        isLoading: true,\r\n      });\r\n      const request = async () => {\r\n        const result = await this.fetchRequest();\r\n        this.setState({\r\n          gallery: [...result],\r\n          isLoading: false,\r\n        });\r\n      };\r\n      request();\r\n    }\r\n\r\n    if (page !== prevState.page) {\r\n      this.setState({\r\n        isLoading: true,\r\n      });\r\n      const request = async () => {\r\n        const result = await this.fetchRequest();\r\n        this.setState((state) => ({\r\n          gallery: [...state.gallery, ...result],\r\n          isLoading: false,\r\n        }));\r\n\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      };\r\n      request();\r\n    }\r\n  }\r\n\r\n  pageChange = () => {\r\n    this.setState((state) => ({\r\n      page: state.page + 1,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { gallery, isLoading, error } = this.state;\r\n    return (\r\n      <>\r\n        <Searchbar ChangeQuery={this.ChangeQuery} />\r\n        {!!gallery.length && !error && (\r\n          <>\r\n            <ImageGallery gallery={gallery} />\r\n            {!isLoading && <Button pageChange={this.pageChange} />}\r\n          </>\r\n        )}\r\n        {isLoading && <LoaderSection />}\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default FinderImage;\r\n"]},"metadata":{},"sourceType":"module"}